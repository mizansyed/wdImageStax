/*!
 * jQuery WD ImageStax Plugin v0.7(beta)
 *
 *
 * Copyright 2014, Mizan Syed, With Digital
 * Licensed under the Apache License, Version 2.0
 * Read licence.txt and notice.txt for info
 */
;(function(a){a.fn.wdImageStax=function(p){var g={height:false,width:false,list:false,centreImages:false,index:1200,degree:20,degreePattern:"default",animateSpeed:500,swingTop:0.4,swingLeft:0.6,evaluateOnWindowResize:true,wrapperStyles:{},imageStyles:{}};var f=a.extend(true,{},g,p);var b={};var m=function(q){if(f.height==false){f.height=q.innerHeight()}if(f.width==false){f.width=q.innerWidth()}if(f.list==""){f.list=false}if(f.animateSpeed>1000){f.animateSpeed=1000}if(f.evaluateOnWindowResize==true){a(window).resize(e)}};var d=function(){var q=(f.list===false)?b.wrapper.find("ul"):"ul"+f.list;var r=b.wrapper.find(q).find("li");b.ul=q;b.list=r};var j=function(){b.list_size=b.list.length;b.rotateToIncrement=n();o(true)};var n=function(){if(f.degree<10){f.degree=20}var q=f.degree*2;return Math.ceil(q/b.list.length)};var i=function(){if(f.degree<10){f.degree=20}var r=-f.degree;var q=f.degree;var s=Math.floor(Math.random()*(q-r+1))+r;if(s==b.randomDegree){i()}else{b.randomDegree=s;return s}};var h=function(q){q.css(f.wrapperStyles);q.css({width:f.width,height:f.height})};var c=function(q){q.css("position","absolute")};var l=function(){var q=a("body");q.css("overflow","visible");var r=a(this);r.animate({left:"+="+(f.width*f.swingLeft),top:"-"+(f.height*f.swingTop)},f.animateSpeed,"easeOutBack",function(){r.css("z-index",f.index-b.list.length)}).animate({left:(f.centreImages==true)?(b.wrapper.width()-el.width())/2:0,top:(f.centreImages==true)?(b.wrapper.height()-el.height())/2:0},{duration:f.animateSpeed,easing:"easeOutBack",complete:function(){q.css("overflow","visible")}});li=r.parent();b.ul.prepend(li);d();o(false)};var o=function(q){var r=b.rotateToIncrement;b.list.each(function(t){var u=a(this).find("img");var w=u.height();var s=u.width();var v=false;c(u);if(f.width<s){f.width=s;v=true}if(f.height<w){f.height=w;v=true}if(v==true){h(b.wrapper)}if(f.degreePattern=="random"){r=i()}if(t==b.list.length-1){r=0}k(u,f.index++,r);if(q==true){u.on("click",l)}r+=b.rotateToIncrement})};var k=function(r,q,s){r.css(f.imageStyles);r.css({left:(f.centreImages==true)?(b.wrapper.width()-r.width())/2:0,top:(f.centreImages==true)?(b.wrapper.height()-r.height())/2:0});r.css("position","absolute");r.css("z-index",q);r.css("transform","rotate( "+s+"deg)");r.css("-ms-transform","rotate( "+s+"deg)");r.css("-moz-transform","rotate( "+s+"deg)");r.css("-webkit-transform","rotate( "+s+"deg)");r.css("-o-transform","rotate( "+s+"deg)")};var e=function(){f.height=b.wrapper.innerHeight();f.width=b.wrapper.innerWidth();o(false)};return this.each(function(){var q=b.wrapper=a(this);m(q);h(q);d();j()})}})(jQuery);